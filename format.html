<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link
      rel="stylesheet"
      href="node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-md-6 col-lg-8 col-xl-8">
          <div class="card text-black">
            <div class="text-center">
              <h3 class="card-title">${listing.title}</h3>
              <p class="text-muted mb-4">${listing.tags}</p>
            </div>
            <div
              id="carouselExampleControls"
              class="carousel slide"
              data-bs-ride="carousel"
            >
              <div class="carousel-inner">
                ${listing.media.map( (image, index) => `
                <div class="carousel-item ${index == 0 ? `active` : ``}">
                  <img src="${image}" class="card-img-top carouselImg" alt="" />
                </div>
                ` )}
              </div>
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#carouselExampleControls"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#carouselExampleControls"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
            <div class="card-body">
              <div>
                <div class="d-flex justify-content-between">
                  <span>Created at :</span
                  ><span
                    >${createDate.toLocaleDateString( "en-US", options )}</span
                  >
                </div>
                <div class="d-flex justify-content-between">
                  <span>Last updated :</span
                  ><span
                    >${updateDate.toLocaleDateString( "en-US", options )}</span
                  >
                </div>
                <div class="d-flex justify-content-between">
                  <span>Auction end:</span
                  ><span
                    >${endDate.toLocaleDateString( "en-US", options )}</span
                  >
                </div>
              </div>
              <div
                class="d-flex justify-content-between total font-weight-bold mt-4"
              >
                <span>Number of bids: </span><span>${listing._count.bids}</span>
              </div>
              ${ listing.bids.length > 0 ? `
              <div
                class="d-flex justify-content-between total font-weight-bold mt-4"
              >
                <span>highest bid: </span
                ><span>${ listing.bids.at(-1).amount }</span>
              </div>
              ` : "" }
              <form class="row g-3">
                <div class="col-auto">
                  <label for="userBid" class="form-label">Your bid</label>
                  <input
                    type="number"
                    class="form-control"
                    id="userBid"
                    placeholder="0"
                  />
                </div>
                <div class="col-auto">
                  <button
                    type="submit"
                    class="btn btn-primary mb-3"
                    id="bidBtn"
                  >
                    Place Bid
                  </button>
                </div>
              </form>
              <div
                class="d-flex justify-content-between total font-weight-bold mt-4"
                id="bidSection"
              >
                <div
                  class="d-flex justify-content-between total font-weight-bold mt-4"
                  id="bidsContainer"
                >
                  ${listing.bids.map( (seller, index, amount, ) => `
                  <div class="carousel-item ${index == 0 ? `active` : ``}">
                    <img
                      src="${image}"
                      class="card-img-top carouselImg"
                      alt=""
                    />
                  </div>
                  ` )}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<ul class="list-group">
  <li class="list-group-item">
    <span>Created at :</span
    ><span>${createDate.toLocaleDateString( "en-US", options )}</span>
  </li>
  <li class="list-group-item">
    <span>Last updated :</span
    ><span>${updateDate.toLocaleDateString( "en-US", options )}</span>
  </li>
  <li class="list-group-item">
    <span>Auction end:</span
    ><span>${endDate.toLocaleDateString( "en-US", options )}</span>
  </li>
  <li class="list-group-item">
    <div class="d-flex justify-content-between total font-weight-bold mt-4">
      <span>Number of bids: </span><span>${listing._count.bids}</span>
    </div>
    ${ listing.bids.length > 0 ? `
    <div class="d-flex justify-content-between total font-weight-bold mt-4">
      <span>highest bid: </span><span>${ listing.bids.at(-1).amount }</span>
    </div>
    ` : "" }
  </li>
  <li class="list-group-item">
    <form class="row g-3">
      <div class="col-auto">
        <label for="userBid" class="form-label">Your bid</label>
        <input
          type="number"
          class="form-control"
          id="userBid"
          placeholder="0"
        />
        <button type="submit" class="btn btn-primary mb-3" id="bidBtn">
          Place Bid
        </button>
      </div>
    </form>
  </li>
</ul>
<!-- DO NOT DELETE YET! -->
<!-- <div class="d-flex justify-content-between">
    <span>Created at
      :</span><span>${createDate.toLocaleDateString(
        "en-US",
        options
      )}</span>
  </div>
  <div class="d-flex justify-content-between">
    <span>Last updated
      :</span><span>${updateDate.toLocaleDateString(
        "en-US",
        options
      )}</span>
  </div>
  <div class="d-flex justify-content-between">
    <span>Auction
      end:</span><span>${endDate.toLocaleDateString(
        "en-US",
        options
      )}</span>
  </div>
</div>
<div
  class="d-flex justify-content-between total font-weight-bold mt-4">
  <span>Number of bids: </span><span>${listing._count.bids}</span>
</div>
${
  listing.bids.length > 0
    ? `<div
  class="d-flex justify-content-between total font-weight-bold mt-4">
  <span>highest bid: </span><span>${
    listing.bids.at(-1).amount
  }</span>
</div>`
    : ""
}
<form class="row g-3">
  <div class="col-auto">
    <label for="userBid" class="form-label">Your bid</label>
    <input type="number" class="form-control" id="userBid"
      placeholder="0"> <button type="submit" class="btn btn-primary mb-3"
      id="bidBtn">Place Bid</button>
  </div>               
</form> -->

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-8 col-xl-8">
      <div class="card text-black">
        <div class="text-center">
          <h3 class="card-title">${listing.title}</h3>
        </div>
        <div
          id="carouselExampleControls"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner">
            ${listing.media.map( (image, index) => `
            <div class="carousel-item ${index == 0 ? `active` : ``}">
              <img src="${image}" class="card-img-top carouselImg" alt="" />
            </div>
            ` )}
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselExampleControls"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselExampleControls"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
        <div class="card-body">
          <div>
            <p class="text-muted mb-4">${listing.tags}</p>
            <ul class="list-group">
              <li class="list-group-item">
                <span>Created at :</span
                ><span
                  >${createDate.toLocaleDateString( "en-US", options )}</span
                >
              </li>
              <li class="list-group-item">
                <span>Last updated :</span
                ><span
                  >${updateDate.toLocaleDateString( "en-US", options )}</span
                >
              </li>
              <li class="list-group-item">
                <span>Auction end:</span
                ><span>${endDate.toLocaleDateString( "en-US", options )}</span>
              </li>
              <li class="list-group-item">
                <div
                  class="d-flex justify-content-between total font-weight-bold mt-4"
                >
                  <span>Number of bids: </span
                  ><span>${listing._count.bids}</span>
                </div>
                ${ listing.bids.length > 0 ? `
                <div
                  class="d-flex justify-content-between total font-weight-bold mt-4"
                >
                  <span>highest bid: </span
                  ><span>${listing.bids.at(-1).amount}</span>
                </div>
                ` : "" }
              </li>
              <li class="list-group-item">
                <form class="row g-3">
                  <div class="col-auto">
                    <label for="userBid" class="form-label">Your bid</label>
                    <input
                      type="number"
                      class="form-control"
                      id="userBid"
                      placeholder="0"
                    />
                    <button
                      type="submit"
                      class="btn btn-primary mb-3"
                      id="bidBtn"
                    >
                      Place Bid
                    </button>
                  </div>
                </form>
              </li>
            </ul>
            <div class="container-fluid">
              <div class="container-fluid border text-center">
                <h6>Bid Timeline</h6>
              </div>
              <div
                class="container-fluid row row-cols-auto m-1 justify-content-center"
                id="bidsContainer"
              >
                ${bidInfo}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="card mb-3">
  <div class="row g-0">
    <div class="col-md-4">
      <img
        src="${listing.seller.avatar}"
        class="img-fluid rounded-start sellerImg"
        alt="Profile image for seller ${listing.seller.name}"
      />
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">Seller: ${listing.seller.name}</h5>
        <p class="card-text">Auction Wins: ${listing.seller.wins.length}</p>
      </div>
    </div>
  </div>
</div>
